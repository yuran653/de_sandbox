apiVersion: v1
kind: ConfigMap
metadata:
  name: spark-master-config
  namespace: spark
data:
  spark-defaults.conf: |
    spark.master.ui.retainedApplications=20
    spark.master.ui.retainedDrivers=20
    spark.master.exceptionOnMemoryOverflow=false
    spark.local.dir=/tmp/spark-master

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: spark-worker-config
  namespace: spark
data:
  spark-defaults.conf: |
    # Note: Executor resources are typically set by user code
    # These are fallback defaults only
    spark.executor.cores=1
    spark.executor.memory=1g
    spark.executor.memoryOverhead=128m
    spark.worker.cleanup.enabled=true
    spark.worker.cleanup.interval=3600
    spark.worker.cleanup.appDataTtl=10800
    spark.worker.timeout=120
    spark.task.cpus=1
    spark.task.maxFailures=4
    spark.scheduler.mode=FIFO
    spark.local.dir=/tmp/spark-worker
    spark.eventLog.dir=/var/spark-events
    spark.history.fs.logDirectory=/var/spark-events
