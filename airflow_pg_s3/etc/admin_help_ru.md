# Администрирование OpenVPN-сервера (de_sandbox)

Используйте эту инструкцию при добавлении нового VPN-клиента.

---

### Шаг 1. Создание конфигурации клиента

* Запустите скрипт генерации, указав уникальное имя клиента:
`./etc/generate_client_ovpn.sh client_name`
* Пример: `./etc/generate_client_ovpn.sh alice_laptop`

---

### Шаг 2. Передача .ovpn-файла клиенту

* Скрипт выведет путь к созданному файлу `.ovpn`.
* Безопасно передайте этот файл клиенту (например, через `scp`, `sftp` или защищенную ссылку).
* ВНИМАНИЕ: НЕ отправляйте этот файл через незашифрованные каналы (email/slack), так как он содержит закрытый ключ.

---

### Шаг 3. Подключение клиента

* Клиент должен импортировать файл `.ovpn` в приложение OpenVPN Connect (Windows/macOS/Linux/Android/iOS).
* После подключения должны стать доступны внутренние ресурсы (конкретные права доступа проверяйте в правилах `nftables`).

---

### Шаг 4. Отзыв сертификата (при необходимости)

* Чтобы отозвать доступ у пользователя, выполните команду `./easyrsa revoke имя_клиента` в директории `/etc/openvpn/easy-rsa/`, а затем создайте новый список отзыва: `./easyrsa gen-crl`.
* Скопируйте `crl.pem` в `/etc/openvpn/` и перезапустите службу.
* Примечание: Если конфигурация CRL еще не добавлена в `server.conf`, это необходимо сделать.
